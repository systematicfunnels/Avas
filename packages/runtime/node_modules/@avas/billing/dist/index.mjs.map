{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export interface Plan {\r\n  id: string\r\n  name: string\r\n  price: number\r\n  interval: 'month' | 'year'\r\n  features: string[]\r\n}\r\n\r\nexport interface Subscription {\r\n  id: string\r\n  tenantId: string\r\n  planId: string\r\n  status: 'active' | 'canceled' | 'past_due' | 'trialing'\r\n  currentPeriodEnd: Date\r\n}\r\n\r\nexport interface BillingConfig {\r\n  stripeSecretKey?: string\r\n  defaultCurrency: string\r\n}\r\n\r\nexport function createBilling(config: BillingConfig) {\r\n  const plans: Plan[] = []\r\n  const subscriptions: Subscription[] = []\r\n\r\n  return {\r\n    config,\r\n    createPlan: (plan: Plan) => {\r\n      plans.push(plan)\r\n      return plan\r\n    },\r\n    getPlans: () => plans,\r\n    createSubscription: (subscription: Subscription) => {\r\n      subscriptions.push(subscription)\r\n      return subscription\r\n    },\r\n    getSubscriptions: (tenantId?: string) => {\r\n      return tenantId\r\n        ? subscriptions.filter(s => s.tenantId === tenantId)\r\n        : subscriptions\r\n    },\r\n    cancelSubscription: (subscriptionId: string) => {\r\n      const subscription = subscriptions.find(s => s.id === subscriptionId)\r\n      if (subscription) {\r\n        subscription.status = 'canceled'\r\n        return subscription\r\n      }\r\n      return null\r\n    }\r\n  }\r\n}\r\n\r\nexport function useBilling() {\r\n  return {\r\n    plans: [],\r\n    subscriptions: [],\r\n    createSubscription: async () => {},\r\n    cancelSubscription: async () => {}\r\n  }\r\n}\r\n"],"mappings":"AAqBO,SAASA,EAAcC,EAAuB,CACnD,IAAMC,EAAgB,CAAC,EACjBC,EAAgC,CAAC,EAEvC,MAAO,CACL,OAAAF,EACA,WAAaG,IACXF,EAAM,KAAKE,CAAI,EACRA,GAET,SAAU,IAAMF,EAChB,mBAAqBG,IACnBF,EAAc,KAAKE,CAAY,EACxBA,GAET,iBAAmBC,GACVA,EACHH,EAAc,OAAOI,GAAKA,EAAE,WAAaD,CAAQ,EACjDH,EAEN,mBAAqBK,GAA2B,CAC9C,IAAMH,EAAeF,EAAc,KAAK,GAAK,EAAE,KAAOK,CAAc,EACpE,OAAIH,GACFA,EAAa,OAAS,WACfA,GAEF,IACT,CACF,CACF,CAEO,SAASI,GAAa,CAC3B,MAAO,CACL,MAAO,CAAC,EACR,cAAe,CAAC,EAChB,mBAAoB,SAAY,CAAC,EACjC,mBAAoB,SAAY,CAAC,CACnC,CACF","names":["createBilling","config","plans","subscriptions","plan","subscription","tenantId","s","subscriptionId","useBilling"]}