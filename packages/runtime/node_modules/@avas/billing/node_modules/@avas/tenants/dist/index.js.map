{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export interface Tenant {\r\n  id: string\r\n  name: string\r\n  domain?: string\r\n  metadata?: Record<string, any>\r\n}\r\n\r\nexport interface TenantContext {\r\n  currentTenant: Tenant | null\r\n  tenants: Tenant[]\r\n}\r\n\r\nexport function createTenantContext(initialTenants: Tenant[] = []) {\r\n  let currentTenant: Tenant | null = null\r\n\r\n  return {\r\n    getCurrentTenant: () => currentTenant,\r\n    setCurrentTenant: (tenant: Tenant | null) => {\r\n      currentTenant = tenant\r\n    },\r\n    getTenants: () => initialTenants,\r\n    addTenant: (tenant: Tenant) => {\r\n      initialTenants.push(tenant)\r\n    },\r\n    withTenant: <T>(tenantId: string, fn: () => T): T => {\r\n      const tenant = initialTenants.find(t => t.id === tenantId)\r\n      if (!tenant) throw new Error(`Tenant ${tenantId} not found`)\r\n      const previousTenant = currentTenant\r\n      currentTenant = tenant\r\n      try {\r\n        return fn()\r\n      } finally {\r\n        currentTenant = previousTenant\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function TenantContext() {\r\n  return createTenantContext()\r\n}\r\n"],"mappings":"4ZAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,mBAAAE,EAAA,wBAAAC,IAAA,eAAAC,EAAAJ,GAYO,SAASG,EAAoBE,EAA2B,CAAC,EAAG,CACjE,IAAIC,EAA+B,KAEnC,MAAO,CACL,iBAAkB,IAAMA,EACxB,iBAAmBC,GAA0B,CAC3CD,EAAgBC,CAClB,EACA,WAAY,IAAMF,EAClB,UAAYE,GAAmB,CAC7BF,EAAe,KAAKE,CAAM,CAC5B,EACA,WAAY,CAAIC,EAAkBC,IAAmB,CACnD,IAAMF,EAASF,EAAe,KAAKK,GAAKA,EAAE,KAAOF,CAAQ,EACzD,GAAI,CAACD,EAAQ,MAAM,IAAI,MAAM,UAAUC,CAAQ,YAAY,EAC3D,IAAMG,EAAiBL,EACvBA,EAAgBC,EAChB,GAAI,CACF,OAAOE,EAAG,CACZ,QAAE,CACAH,EAAgBK,CAClB,CACF,CACF,CACF,CAEO,SAAST,GAAgB,CAC9B,OAAOC,EAAoB,CAC7B","names":["index_exports","__export","TenantContext","createTenantContext","__toCommonJS","initialTenants","currentTenant","tenant","tenantId","fn","t","previousTenant"]}