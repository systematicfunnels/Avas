{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { createAuth, AuthConfig } from '@avas/auth'\r\nimport { createTenantContext } from '@avas/tenants'\r\nimport { createBilling, BillingConfig } from '@avas/billing'\r\n\r\nexport interface AvasConfig {\r\n  appId: string\r\n  tenantMode: 'single-db' | 'multi-db'\r\n  auth?: AuthConfig\r\n  billing?: BillingConfig\r\n}\r\n\r\nexport function initAvas(config: AvasConfig) {\r\n  const auth = config.auth ? createAuth(config.auth) : null\r\n  const tenants = createTenantContext()\r\n  const billing = config.billing ? createBilling(config.billing) : null\r\n\r\n  return {\r\n    config,\r\n    auth,\r\n    tenants,\r\n    billing,\r\n    getContext: () => ({\r\n      appId: config.appId,\r\n      tenantMode: config.tenantMode,\r\n      currentTenant: tenants.getCurrentTenant()\r\n    })\r\n  }\r\n}\r\n\r\nexport type AvasInstance = ReturnType<typeof initAvas>\r\n"],"mappings":"AAAA,OAAS,cAAAA,MAA8B,aACvC,OAAS,uBAAAC,MAA2B,gBACpC,OAAS,iBAAAC,MAAoC,gBAStC,SAASC,EAASC,EAAoB,CAC3C,IAAMC,EAAOD,EAAO,KAAOJ,EAAWI,EAAO,IAAI,EAAI,KAC/CE,EAAUL,EAAoB,EAC9BM,EAAUH,EAAO,QAAUF,EAAcE,EAAO,OAAO,EAAI,KAEjE,MAAO,CACL,OAAAA,EACA,KAAAC,EACA,QAAAC,EACA,QAAAC,EACA,WAAY,KAAO,CACjB,MAAOH,EAAO,MACd,WAAYA,EAAO,WACnB,cAAeE,EAAQ,iBAAiB,CAC1C,EACF,CACF","names":["createAuth","createTenantContext","createBilling","initAvas","config","auth","tenants","billing"]}