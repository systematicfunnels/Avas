{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { createAuth, AuthConfig } from '@avas/auth'\r\nimport { createTenantContext } from '@avas/tenants'\r\nimport { createBilling, BillingConfig } from '@avas/billing'\r\n\r\nexport interface AvasConfig {\r\n  appId: string\r\n  tenantMode: 'single-db' | 'multi-db'\r\n  auth?: AuthConfig\r\n  billing?: BillingConfig\r\n}\r\n\r\nexport function initAvas(config: AvasConfig) {\r\n  const auth = config.auth ? createAuth(config.auth) : null\r\n  const tenants = createTenantContext()\r\n  const billing = config.billing ? createBilling(config.billing) : null\r\n\r\n  return {\r\n    config,\r\n    auth,\r\n    tenants,\r\n    billing,\r\n    getContext: () => ({\r\n      appId: config.appId,\r\n      tenantMode: config.tenantMode,\r\n      currentTenant: tenants.getCurrentTenant()\r\n    })\r\n  }\r\n}\r\n\r\nexport type AvasInstance = ReturnType<typeof initAvas>\r\n"],"mappings":"yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,cAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAuC,sBACvCC,EAAoC,yBACpCC,EAA6C,yBAStC,SAASJ,EAASK,EAAoB,CAC3C,IAAMC,EAAOD,EAAO,QAAO,cAAWA,EAAO,IAAI,EAAI,KAC/CE,KAAU,uBAAoB,EAC9BC,EAAUH,EAAO,WAAU,iBAAcA,EAAO,OAAO,EAAI,KAEjE,MAAO,CACL,OAAAA,EACA,KAAAC,EACA,QAAAC,EACA,QAAAC,EACA,WAAY,KAAO,CACjB,MAAOH,EAAO,MACd,WAAYA,EAAO,WACnB,cAAeE,EAAQ,iBAAiB,CAC1C,EACF,CACF","names":["index_exports","__export","initAvas","__toCommonJS","import_auth","import_tenants","import_billing","config","auth","tenants","billing"]}